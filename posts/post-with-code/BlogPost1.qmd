---
title: "Blog Post 1: Analyzing State Gun Violence"
author: "Mason Zimmer"
date: "2026-02-6"
categories: [news, code, analysis]
image: "image.jpg"
---


```{r, include=FALSE}

library(rvest)
library(dplyr)
library(tidyverse)
##Creating the Dataset
gun_violent<- read_csv("~/Desktop/ds334/data/gva_weekly_with_trends-2026-02-02.csv")


gun_violent2<- gun_violent|> 
  separate(col = week,
           into = c("year", "week"),
           sep = " ")|>
  filter(victims_killed > 0)|>
  group_by(state, city_or_county, year)|> summarise(yearly_deaths = sum(victims_killed))|>
  summarise(avg_deaths_per_year = mean(yearly_deaths), .groups = "drop") |>
  rename(name = "city_or_county", State = "state")|> arrange(desc(avg_deaths_per_year))
```


```{r, include=FALSE}
##Pulling and joining the grade dataset
url <- "https://giffords.org/lawcenter/resources/scorecard/"
page <- read_html(url)

table_data <- page |>
  html_elements("table")|>
  html_table(fill = TRUE)

grade_table <- table_data[[1]]

state_grade<-grade_table|> select(State, Grade)

full_df <-left_join(gun_violent2, state_grade, by = "State")

reorderedDeaths_df<-full_df|>arrange(desc(avg_deaths_per_year))|>ungroup()|> filter(Grade > 0)

reorderedDeaths_df<-reorderedDeaths_df|>slice(1:10)|>mutate(name = fct_reorder(name, avg_deaths_per_year))
```

Introduction:

In this post we will be analyzing gun violence in major cities across the United States. The data is from the Gun Violence Data Hub which has collected incident reports since 2014 to compile a data set to better educate the populus on which cities are dangerous. Further we will also be using data from Giffords Law Center, a organization that grades states based on how effective their gun control laws are.

We are most interested in the victims_killed, state, city_or_county, and grade variables. There are a total of 94000 observations of gun violence the in data set.
My main question for this project was, Do states with a higher gun control law grade have less gun violence per year?

The links for the data webpages are here. 
https://giffords.org/lawcenter/resources/scorecard/
https://datahub.thetrace.org/dataset/city-gun-violence-trends/


Visualization:
```{r}
ggplot(data = reorderedDeaths_df, aes(x = name, y = avg_deaths_per_year, colour = Grade))+
  geom_point(shape = 21, color = "black")+
  geom_label(aes(label = Grade), show.legend = FALSE)+
  labs(color = "State and Rating")+
  coord_flip()+
  scale_y_continuous(limits = c(0, NA))+
  labs(title = "How Dangerous Cities Correlate to their State's Gun Control Grade", y = "Average Gun Violence Victims per year from 2014-2026", x = "Top 10 Most Dangerous Cities in the USA")+
  theme_light()
```

Of the top 10 cities with the most gun violence per year, half of them have a state gun control rating of a B or above. Most compelling is the city with the most victims per year, Chicago Illinois, also has the highest gun control grade on the list. Unsurprisingly however the other 5 states have the worst gun control grades, although Chicago nearly doubles the number of victims Houston has per year. 

Conclusion:

The flaws of this data however is that it most likely includes self defense and suicides, which would not be considered "Gun Violence" by the modern standard of shootings, further the data cannot include cases where the victims have not been recovered. Similarly the data set that grades each State could be biased given that a grade like this is difficult to quantify and obviously does not take into account the number of victims per year, rather they are only interested in the legislature. 
If I had additional time and data I would like to see what states have the least amount of violence and their grades aswell as what contributes to making those states more safe. 

Connection to class ideas:

By creating a visual which had values starting at zero I was able to create a more honest depiction of the data. By removing the key, changing the theme and setting a coord flip I reduced the amount of clutter on the screen. I labled my axis and title to help the reader understand the visuals and I limited the data to the top 10 to reduce visual strain. I also scrapped data from websites and joined multiple data sets together to create my visualizations. 





