usethis::use_github()
```{r}
gun_violence <- read.csv("gun-violence-data_01-2013_03-2018.csv")
import kagglehub
import kagglehub
import
import(kagglehub)
import(kagglehub)
import kagglehub
# Download latest version
path = kagglehub.dataset_download("jameslko/gun-violence-data")
gun_violent<- read.csv("gva_weekly_with_trends-2026-02-02.csv")
gun_violent<- read.csv("gva_weekly_with_trends-2026-02-02.csv")
gun_violent<- read.csv("gva_weekly_with_trends-2026-02-02.csv")
gun_violent<- read.csv("gva_weekly_with_trends-2026-02-02.csv")
gun_violent<- read.csv("gva_weekly_with_trends-2026-02-02.csv")
gun_violent<- read.csv("~/Desktop/ds334/data/gva_weekly_with_trends-2026-02-02.csv")
gun_violent
gun_violent<- filter(victims_killed >= 0)
gun_violent<- filter(victims_killed >= 0)
gun_violent<- gun_violent|> filter(victims_killed >= 0)
gun_violent
gun_violent<- gun_violent|> filter(victims_killed >= 0)
gun_violent<- gun_violent|> filter(victims_killed >= 0)
library(tidyverse)
gun_violent<- read_csv("~/Desktop/ds334/data/gva_weekly_with_trends-2026-02-02.csv")
gun_violent<- gun_violent|> filter(victims_killed >= 0)
gun_violent
gun_violent<- gun_violent|> filter(victims_killed > 0)
gun_violent
gun_violent<- gun_violent|> filter(victims_killed > 0)|>
group_by(state, city_or_county)|> summarise(total_violence = sum(victims_killed))
gun_violent
shp <- read_csv("~/Desktop/ds334/data/stanford-bx729wr3020-csv.csv")
shp
shp
view(shp)
gun_violent
group_by(state, city_or_county)|> summarise(total_violence = sum(victims_killed))
group_by(state, city_or_county)|> summarise(total_violence = sum(victims_killed))
gun_violent
group_by(state, city_or_county)|> summarise(total_violence = sum(victims_killed))
gun_violent
group_by(state, city_or_county)|> summarise(total_violence = sum(victims_killed))
gun_violent<- gun_violent|> filter(victims_killed > 0)|> rename(name = "city_or_county")
gun_violent<- gun_violent|> filter(victims_killed > 0)|> rename(name = "city_or_county")
gun_violent<- gun_violent|> filter(victims_killed > 0)
gun_violent<- gun_violent|> filter(victims_killed > 0)|>
group_by(state, city_or_county)|> summarise(total_violence = sum(victims_killed))
gun_violent<- gun_violent|> filter(victims_killed > 0)|>
group_by(state, city_or_county)|> summarise(total_violence = sum(victims_killed))
gun_violent<- gun_violent|> filter(victims_killed > 0)|>
group_by(state, city_or_county)|> summarise(total_violence = sum(victims_killed))
library(tidyverse)
gun_violent<- read_csv("~/Desktop/ds334/data/gva_weekly_with_trends-2026-02-02.csv")
shp <- read_csv("~/Desktop/ds334/data/stanford-bx729wr3020-csv.csv")
gun_violent<- gun_violent|> filter(victims_killed > 0)|>
group_by(state, city_or_county)|> summarise(total_violence = sum(victims_killed))
view(shp)
gun_violent
gun_violent<- gun_violent|> filter(victims_killed > 0)|>
group_by(state, city_or_county)|> summarise(total_violence = sum(victims_killed))|>
rename(name = "city_or_county")
gun_violent
gun_violent<- gun_violent|> filter(victims_killed > 0)|>
group_by(state, city_or_county)|> summarise(total_violence = sum(victims_killed))|>
rename(name = "city_or_county")
gun_violent
gun_violent<- gun_violent|> filter(victims_killed > 0)|>
group_by(state, city_or_county)|> summarise(total_violence = sum(victims_killed))|>
rename(name = "city_or_county")
gun_violent<- gun_violent|> filter(victims_killed > 0)|>
group_by(state, city_or_county)|> summarise(total_violence = sum(victims_killed))
gun_violent
gun_violent<- gun_violent|> filter(victims_killed > 0)|>
group_by(state, city_or_county)|> summarise(total_violence = sum(victims_killed))
gun_violent|> filter(victims_killed > 0)|>
group_by(state, city_or_county)
gun_violent
gun_violent<- read_csv("~/Desktop/ds334/data/gva_weekly_with_trends-2026-02-02.csv")
gun_violent2<- gun_violent|> filter(victims_killed > 0)|>
group_by(state, city_or_county)|> summarise(total_violence = sum(victims_killed))|>
rename(name = "city_or_county")
gun_violent2
gun_violent
gun_violent2<- gun_violent|> filter(victims_killed > 0)|>
group_by(state, city_or_county)|> summarise(total_violence = sum(victims_killed))|>
rename(name = "city_or_county")
gun_violent2
full_df <- left_join(shp, gun_violent2, by = "name")
full_df
ggplot(data = full_df) +
geom_sf() +
theme_void()+
scale_fill_viridis_c()
ggplot(data = full_df) +
geom_sf() +
theme_void()
library(sf)
ggplot(data = full_df) +
geom_sf() +
theme_void()
shp <- read_csv("~/Desktop/ds334/data/stanford-bx729wr3020-csv.csv")|>
st_transform(st_crs("+proj=longlat"))
ggplot(data = full_df) +
geom_sf() +
theme_void()
shp <- read_csv("~/Desktop/ds334/data/stanford-bx729wr3020-csv.csv")|>
st_transform(st_crs("+proj=longlat"))
gun_violent2<- gun_violent|> filter(victims_killed > 0)|>
group_by(state, city_or_county)|> summarise(total_violence = sum(victims_killed))|>
rename(name = "city_or_county")
gun_violent2
gun_violent2<- gun_violent|> filter(victims_killed > 0)|>
group_by(state, city_or_county)|> summarise(total_violence = sum(victims_killed))|>
rename(name = "city_or_county")|> arrange(desc(total_violence))
gun_violent2
gun_violent2<- gun_violent|> filter(victims_killed > 0)|>
group_by(state, city_or_county)|> summarise(total_deaths = sum(victims_killed))|>
rename(name = "city_or_county")|> arrange(desc(total_deaths))
gun_violent2
gun_violent2
gun_violent2
install.packages("rvest")
gun_violent2
install.packages(dplyr)
> install.packages(dplyr)
install.packages("dplyr")
library(rvest)
library(dplyr)
library(dplyr)
library(rvest)
url <- "https://giffords.org/lawcenter/resources/scorecard/"
page <- read_html(url)
table_data <- page |>
html_elements("table")|>
html_table(fill = TRUE)
grade_table <- table_data[[1]]
grade_table
state_grade<-grade_table|> select(State, Grade)
state_grade
gun_violent2
gun_violent2<- gun_violent|> filter(victims_killed > 0)|>
group_by(state, city_or_county)|> summarise(total_deaths = sum(victims_killed))|>
rename(name = "city_or_county")|> arrange(desc(total_deaths))|> rename(State = "state")
full_df <- left_join(gun_violent2, state_grade, by = "State")
full_df
ggplot(data = full_df, aes(x = name, y = total_deaths, colour = State))+
geom_point()+
geom_segment()
ggplot(data = full_df, aes(x = name, y = total_deaths, colour = State))+
geom_point()
full_df <- left_join(gun_violent2, state_grade, by = "State")|> slice(1:20)
ggplot(data = full_df, aes(x = name, y = total_deaths, colour = State))+
geom_point()
full_df <- left_join(gun_violent2, state_grade, by = "State")|> slice(1:20)
full_df <- full_df|> left_join(gun_violent2, state_grade, by = "State")|> slice(1:20)
full_df
full_df <- full_df|> left_join(gun_violent2, state_grade, by = "State")
full_df <- full_df|> left_join(gun_violent2, state_grade, by = "State")
full_df <-left_join(gun_violent2, state_grade, by = "State")
full_df
ggplot(data = full_df, aes(x = name, y = total_deaths, colour = State))+
geom_point()
full_df
full_df|> slice(1:20)
full_df|> arrange(desc(total_deaths)|>slice(1:20)
full_df
full_df|> arrange(desc(total_deaths)|>slice(1:20)
full_df|> arrange(desc(total_deaths))|>slice(1:20)
full_df<-full_df|> arrange(desc(total_deaths))|>slice(1:20)
full_df
full_df|> arrange(desc(total_deaths))
full_df|> arrange(desc(total_deaths))|>slice(1:20)
full_df|> arrange(desc(total_deaths))
full_df<-full_df|> arrange(desc(total_deaths))|>fct_reorder(desc(total_deaths))|>slice(1:20)
full_df
full_df<-full_df|> arrange(desc(total_deaths))
full_df<-full_df|> arrange(desc(total_deaths))
full_df
full_df<-full_df|> arrange(desc(total_deaths))|> mutate(name = fct_reorder(name, total_deaths))
full_df
full_df<-full_df|> arrange(desc(total_deaths))|> mutate(name = fct_reorder(name, total_deaths))|> slice(1:20)
full_df
full_df<-full_df|> arrange(desc(total_deaths))|> mutate(name = fct_reorder(name, total_deaths))
full_df
full_df<-full_df|> arrange(desc(total_deaths))|> mutate(name = fct_reorder(name, total_deaths))|>slice(1:20)
full_df
full_df<-full_df|> arrange(desc(total_deaths))|> mutate(name = fct_reorder(name, total_deaths))
full_df
reorderedDeaths_df
reorderedDeaths_df<-full_df|> arrange(desc(total_deaths))|> mutate(name = fct_reorder(name, total_deaths))
reorderedDeaths_df
reorderedDeaths_df|>slice(1:20)
reorderedDeaths_df<-full_df|> arrange(desc(total_deaths))|> mutate(name = fct_reorder(name, total_deaths))
reorderedDeaths_df
reorderedDeaths_df
reorderedDeaths_df|>slice(1:20)
reorderedDeaths_df<-full_df|> mutate(name = fct_reorder(name, total_deaths))|> arrange(desc(total_deaths))
reorderedDeaths_df
reorderedDeaths_df|>slice(1:20)
reorderedDeaths_df
reorderedDeaths_df<-full_df|> mutate(name = fct_reorder(name, total_deaths))|> arrange(desc(total_deaths))|>ungroup()
reorderedDeaths_df|>slice(1:20)
reorderedDeaths_df|>slice(1:20)
ggplot(data = reorderedDeaths_df, aes(x = name, y = total_deaths, colour = State))+
geom_point()
reorderedDeaths_df|>slice(1:20)
ggplot(data = reorderedDeaths_df, aes(x = name, y = total_deaths, colour = State))+
geom_point()
reorderedDeaths_df<-reorderedDeaths_df|>slice(1:20)
ggplot(data = reorderedDeaths_df, aes(x = name, y = total_deaths, colour = State))+
geom_point()
ggplot(data = reorderedDeaths_df, aes(x = name, y = total_deaths, colour = State))+
geom_point()+
geom_label(aes(text = Grade))
ggplot(data = reorderedDeaths_df, aes(x = name, y = total_deaths, colour = State))+
geom_point()+
geom_label(aes(label = Grade))
ggplot(data = reorderedDeaths_df, aes(x = name, y = total_deaths, colour = State))+
geom_point()+
geom_label(aes(label = Grade, name))
ggplot(data = reorderedDeaths_df, aes(x = name, y = total_deaths, colour = State))+
geom_point()+
geom_label(aes(label = Grade))
reorderedDeaths_df<-reorderedDeaths_df|>slice(1:20)
reorderedDeaths_df
reorderedDeaths_df<-full_df|>arrange(desc(total_deaths))|>ungroup()
reorderedDeaths_df<-reorderedDeaths_df|>slice(1:20)|>mutate(name = fct_reorder(name, total_deaths))
reorderedDeaths_df<-full_df|>arrange(desc(total_deaths))|>ungroup()
reorderedDeaths_df<-reorderedDeaths_df|>slice(1:20)|>mutate(name = fct_reorder(name, total_deaths))
ggplot(data = reorderedDeaths_df, aes(x = name, y = total_deaths, colour = State))+
geom_point()+
geom_label(aes(label = Grade))
reorderedDeaths_df
reorderedDeaths_df<-full_df|>arrange(desc(total_deaths))|>ungroup()|> filter(Grade > 0)
reorderedDeaths_df<-reorderedDeaths_df|>slice(1:20)|>mutate(name = fct_reorder(name, total_deaths))
ggplot(data = reorderedDeaths_df, aes(x = name, y = total_deaths, colour = State))+
geom_point()+
geom_label(aes(label = Grade))
ggplot(data = reorderedDeaths_df, aes( y = total_deaths, colour = name))+
geom_point()+
geom_label(aes(label = Grade))
ggplot(data = reorderedDeaths_df, aes(x = state, y = total_deaths, colour = name))+
geom_point()+
geom_label(aes(label = Grade))
ggplot(data = reorderedDeaths_df, aes(x = State, y = total_deaths, colour = name))+
geom_point()+
geom_label(aes(label = Grade))
ggplot(data = reorderedDeaths_df, aes(x = name, y = total_deaths, colour = State))+
geom_point()+
geom_label(aes(label = Grade))
ggplot(data = reorderedDeaths_df, aes(x = name, y = total_deaths, colour = State))+
geom_point()+
geom_label(aes(label = Grade))+
labs(color = "New Title")
ggplot(data = reorderedDeaths_df, aes(x = name, y = total_deaths, colour = State))+
geom_point()+
geom_label(aes(label = Grade))+
labs(color = "State and Rating")
labs
labs?
?labs
ggplot(data = reorderedDeaths_df, aes(x = name, y = total_deaths, colour = State))+
geom_point()+
geom_label(aes(label = Grade))+
(color = "State and Rating",
ggplot(data = reorderedDeaths_df, aes(x = name, y = total_deaths, colour = State))+
geom_point()+
geom_label(aes(label = Grade))+
(color = "State and Rating",
?labs
ggplot(data = reorderedDeaths_df, aes(x = name, y = total_deaths, colour = State))+
geom_point()+
geom_label(aes(label = Grade))+
labs(color = "State and Rating")
reorderedDeaths_df<-reorderedDeaths_df|>slice(1:20)|>mutate(name = fct_reorder(name, total_deaths))|>unite(State_City = join_by())
reorderedDeaths_df<-reorderedDeaths_df|>slice(1:20)|>mutate(name = fct_reorder(name, total_deaths))|>unite(State_City, State, name, sep("_"))
